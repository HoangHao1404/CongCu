import{c as e,a as s,b as r,d as l,r as n,e as t,g as a,j as i,S as c,L as o}from"./index-BrDBSH3-.js";import{P as d}from"./ProductCard-DJ2DJ4CN.js";import{T as m}from"./Toast-DYksTdz_.js";const x=()=>{var x;const{id:h}=e(),g=s(),{product:u,similarProducts:j,loading:p,error:v}=r(e=>e.product),{addItem:b}=l(),[w,N]=n.useState(0),[f,y]=n.useState(1),[k,L]=n.useState(""),[C,M]=n.useState("");n.useEffect(()=>{h&&(g(t(h)),g(a({productId:h,limit:4}))),N(0),y(1),L(""),M("")},[g,h]),n.useEffect(()=>{u&&(u.sizes&&u.sizes.length>0&&L(u.sizes[0]),u.colors&&u.colors.length>0&&M(u.colors[0]))},[u]);const z=e=>new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND"}).format(e);return p&&!u?i.jsx("div",{className:"container mx-auto px-4 py-16 flex justify-center",children:i.jsx(c,{size:"large"})}):v?i.jsx("div",{className:"container mx-auto px-4 py-16",children:i.jsxs("div",{className:"bg-red-50 p-4 rounded-md",children:[i.jsx("p",{className:"text-red-800",children:v}),i.jsx(o,{to:"/",className:"text-blue-600 hover:underline mt-2 inline-block",children:"Quay lại trang chủ"})]})}):u?i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[i.jsx("div",{className:"mb-4",children:i.jsx("nav",{className:"flex","aria-label":"Breadcrumb",children:i.jsxs("ol",{className:"inline-flex items-center space-x-1 md:space-x-3",children:[i.jsx("li",{className:"inline-flex items-center",children:i.jsx(o,{to:"/",className:"text-gray-700 hover:text-blue-600",children:"Trang chủ"})}),i.jsx("li",{children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),i.jsx(o,{to:`/category/${u.category}`,className:"text-gray-700 hover:text-blue-600 ml-1 md:ml-2",children:u.category})]})}),i.jsx("li",{"aria-current":"page",children:i.jsxs("div",{className:"flex items-center",children:[i.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),i.jsx("span",{className:"text-gray-500 ml-1 md:ml-2 truncate max-w-xs",children:u.name})]})})]})})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-12",children:[i.jsxs("div",{children:[i.jsx("div",{className:"bg-white p-2 rounded-lg shadow-sm mb-4",children:i.jsx("img",{src:(null==(x=u.images)?void 0:x[w])||"https://via.placeholder.com/600x600",alt:u.name,className:"w-full h-96 object-contain"})}),u.images&&u.images.length>1&&i.jsx("div",{className:"grid grid-cols-5 gap-2",children:u.images.map((e,s)=>i.jsx("div",{className:"cursor-pointer border-2 rounded-md overflow-hidden "+(w===s?"border-blue-500":"border-gray-200"),onClick:()=>N(s),children:i.jsx("img",{src:e,alt:`${u.name} - ${s+1}`,className:"w-full h-20 object-cover"})},s))})]}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold mb-2",children:u.name}),u.rating&&i.jsxs("div",{className:"flex items-center mb-4",children:[i.jsx("div",{className:"flex",children:[...Array(5)].map((e,s)=>i.jsx("svg",{className:"w-5 h-5 "+(s<Math.floor(u.rating)?"text-yellow-400":"text-gray-300"),fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},s))}),i.jsxs("span",{className:"ml-2 text-gray-600",children:[u.rating.toFixed(1)," (",u.reviewCount||0," đánh giá)"]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("span",{className:"text-3xl font-bold text-gray-900",children:z(u.price)}),u.discount>0&&u.originalPrice&&i.jsxs("div",{className:"mt-1",children:[i.jsx("span",{className:"text-lg text-gray-500 line-through mr-2",children:z(u.originalPrice)}),i.jsxs("span",{className:"text-red-500 font-medium",children:["Giảm ",u.discount,"%"]})]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-lg font-medium mb-2",children:"Mô tả sản phẩm"}),i.jsx("p",{className:"text-gray-700",children:u.description})]}),u.sizes&&u.sizes.length>0&&i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-lg font-medium mb-2",children:"Kích thước"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:u.sizes.map(e=>i.jsx("button",{className:"px-4 py-2 border rounded-md "+(k===e?"border-blue-500 bg-blue-50 text-blue-600":"border-gray-300 text-gray-700 hover:border-blue-300"),onClick:()=>L(e),children:e},e))})]}),u.colors&&u.colors.length>0&&i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-lg font-medium mb-2",children:"Màu sắc"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:u.colors.map(e=>i.jsx("button",{className:"px-4 py-2 border rounded-md "+(C===e?"border-blue-500 bg-blue-50 text-blue-600":"border-gray-300 text-gray-700 hover:border-blue-300"),onClick:()=>M(e),children:e},e))})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-lg font-medium mb-2",children:"Số lượng"}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("button",{className:"w-10 h-10 border border-gray-300 rounded-l-md flex items-center justify-center hover:bg-gray-100",onClick:()=>f>1&&y(f-1),children:i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 12H4"})})}),i.jsx("input",{type:"number",min:"1",value:f,onChange:e=>{const s=parseInt(e.target.value);s>0&&y(s)},className:"w-16 h-10 border-t border-b border-gray-300 text-center focus:outline-none"}),i.jsx("button",{className:"w-10 h-10 border border-gray-300 rounded-r-md flex items-center justify-center hover:bg-gray-100",onClick:()=>y(f+1),children:i.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})})]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-8",children:[i.jsxs("button",{onClick:()=>{var e,s;!k&&(null==(e=null==u?void 0:u.sizes)?void 0:e.length)>0?m.error("Vui lòng chọn kích thước"):!C&&(null==(s=null==u?void 0:u.colors)?void 0:s.length)>0?m.error("Vui lòng chọn màu sắc"):(b(u,f,k,C),m.success("Đã thêm vào giỏ hàng"))},className:"btn btn-primary flex-1 py-3 flex items-center justify-center",children:[i.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),"Thêm vào giỏ hàng"]}),i.jsxs(o,{to:"/upload-search",className:"btn btn-secondary flex-1 py-3 flex items-center justify-center",children:[i.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Tìm sản phẩm tương tự"]})]}),i.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[i.jsxs("div",{className:"flex items-center mb-4",children:[i.jsx("svg",{className:"w-5 h-5 text-green-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),i.jsx("span",{children:"Giao hàng miễn phí cho đơn hàng từ 500.000đ"})]}),i.jsxs("div",{className:"flex items-center mb-4",children:[i.jsx("svg",{className:"w-5 h-5 text-green-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),i.jsx("span",{children:"Đổi trả trong vòng 30 ngày"})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("svg",{className:"w-5 h-5 text-green-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),i.jsx("span",{children:"Bảo hành 12 tháng"})]})]})]})]}),i.jsxs("div",{className:"mb-12",children:[i.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Sản phẩm tương tự"}),p?i.jsx("div",{className:"flex justify-center py-12",children:i.jsx(c,{})}):j&&j.length>0?i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:j.map(e=>i.jsx(d,{product:e},e.id))}):i.jsx("p",{className:"text-gray-500",children:"Không có sản phẩm tương tự."})]})]}):null};export{x as default};
