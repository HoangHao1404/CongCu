import{a as e,b as s,r as n,j as t,S as r,m as l,s as i}from"./index-BaQYlZUa.js";import{P as a}from"./ProductCard-kLeyx7vo.js";import{T as d}from"./Toast-DNTvS9cc.js";const c=()=>{const c=e(),{aiSuggestedProducts:h,loading:m,error:o}=s(e=>e.product),[x,u]=n.useState(null),[g,j]=n.useState(""),p=n.useRef(null);return t.jsxs("div",{className:"container mx-auto px-4 py-8",children:[t.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Tìm kiếm sản phẩm bằng hình ảnh"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-12",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[t.jsx("h2",{className:"text-xl font-bold mb-4",children:"Tải lên hình ảnh"}),t.jsxs("div",{className:"border-2 border-dashed rounded-lg p-6 text-center "+(g?"border-blue-300":"border-gray-300"),onDragOver:e=>{e.preventDefault()},onDrop:e=>{e.preventDefault();const s=e.dataTransfer.files[0];if(!s)return;if(!s.type.match("image.*"))return void d.error("Vui lòng chọn file hình ảnh");if(s.size>5242880)return void d.error("Kích thước file không được vượt quá 5MB");u(s);const n=new FileReader;n.onloadend=()=>{j(n.result)},n.readAsDataURL(s),c(l())},children:[g?t.jsx("div",{className:"mb-4",children:t.jsx("img",{src:g,alt:"Preview",className:"max-h-64 mx-auto rounded-lg"})}):t.jsx("div",{className:"mb-4",children:t.jsx("svg",{className:"w-16 h-16 mx-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),t.jsxs("p",{className:"text-gray-600 mb-4",children:["Kéo và thả hình ảnh vào đây, hoặc"," ",t.jsx("button",{onClick:()=>p.current.click(),className:"text-blue-600 hover:text-blue-800 font-medium",children:"chọn từ thiết bị"})]}),t.jsx("p",{className:"text-sm text-gray-500",children:"Hỗ trợ định dạng: JPEG, PNG, GIF. Kích thước tối đa: 5MB"}),t.jsx("input",{type:"file",ref:p,onChange:e=>{const s=e.target.files[0];if(!s)return;if(!s.type.match("image.*"))return void d.error("Vui lòng chọn file hình ảnh");if(s.size>5242880)return void d.error("Kích thước file không được vượt quá 5MB");u(s);const n=new FileReader;n.onloadend=()=>{j(n.result)},n.readAsDataURL(s),c(l())},accept:"image/*",className:"hidden"})]}),t.jsx("div",{className:"mt-6",children:t.jsx("button",{onClick:()=>{x?c(i(x)):d.error("Vui lòng chọn hình ảnh")},disabled:!x||m,className:"btn btn-primary w-full py-3 flex items-center justify-center "+(!x||m?"opacity-50 cursor-not-allowed":""),children:m?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Đang tìm kiếm..."]}):t.jsxs(t.Fragment,{children:[t.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Tìm sản phẩm tương tự"]})})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[t.jsx("h2",{className:"text-xl font-bold mb-4",children:"Hướng dẫn sử dụng"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-start",children:[t.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mr-3",children:"1"}),t.jsx("p",{children:"Tải lên hình ảnh sản phẩm bạn muốn tìm (quần áo, giày dép, phụ kiện...)"})]}),t.jsxs("div",{className:"flex items-start",children:[t.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mr-3",children:"2"}),t.jsx("p",{children:'Nhấn nút "Tìm sản phẩm tương tự" để bắt đầu tìm kiếm'})]}),t.jsxs("div",{className:"flex items-start",children:[t.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mr-3",children:"3"}),t.jsx("p",{children:"Hệ thống AI sẽ phân tích hình ảnh và hiển thị các sản phẩm tương tự"})]}),t.jsxs("div",{className:"flex items-start",children:[t.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mr-3",children:"4"}),t.jsx("p",{children:"Chọn sản phẩm bạn thích và thêm vào giỏ hàng"})]})]})]})]}),t.jsx("div",{children:t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[t.jsx("h2",{className:"text-xl font-bold mb-4",children:"Kết quả tìm kiếm"}),m?t.jsx("div",{className:"py-12 flex justify-center",children:t.jsx(r,{size:"large"})}):o?t.jsx("div",{className:"bg-red-50 p-4 rounded-md",children:t.jsx("p",{className:"text-red-800",children:o})}):h.length>0?t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:h.map(e=>t.jsx(a,{product:e},e.id))}):g?t.jsx("div",{className:"py-8 text-center",children:t.jsx("p",{className:"text-gray-500",children:'Nhấn "Tìm sản phẩm tương tự" để bắt đầu tìm kiếm.'})}):t.jsx("div",{className:"py-8 text-center",children:t.jsx("p",{className:"text-gray-500",children:"Tải lên hình ảnh để tìm kiếm sản phẩm tương tự."})})]})})]})]})};export{c as default};
